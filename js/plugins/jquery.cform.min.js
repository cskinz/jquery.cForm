/*!
 * jQuery cForms v1.1.0
 * http://cforms.jacksbox.de
 *
 * Author: Mario JÃ¤ckle
 * eMail: support@jacksbox.de
 *
 * Copyright 2015, jacksbox.design
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */
 !function(e){e.cForm=function(a){var t=this;t.$element=e(a),t.element=a,t.$element.data("cForm",t),t.init=function(){t.options=e.extend({},e.cForm.defaultOptions,t.options),t.options.templates=e.extend({},e.cForm.defaultOptions.templates,t.options.templates);var a=["input","textarea","select","button"];if(t.radioGroupArray=[],t.$element.is(a.join())){var d=t.tagName(t.$element);"input"===d&&t.handleInput(t.$element),"select"===d&&t.handleSelect(t.$element),"button"===d&&t.handleButton(t.$element),"textarea"===d&&t.handleTextarea(t.$element)}else t.$element.find("input").each(function(){t.handleInput(e(this))}),t.$element.find("select").each(function(){t.handleSelect(e(this))}),t.$element.find("button").each(function(){t.handleButton(e(this))}),t.$element.find("textarea").each(function(){t.handleTextarea(e(this))})},t.handleButton=function(e){var a=t.options.templates.button;e.wrap(a)},t.handleTextarea=function(e){var a=t.options.templates.textarea;e.wrap(a)},t.handleInput=function(a){var d=a.attr("type"),i=a.attr("name"),n=a.attr("value"),r=a.attr("checked"),o="",c=e();if("undefined"==typeof d&&d===!1)return console.log("Error: Missing type-Attribute on input!"),!1;switch("undefined"==typeof i&&i===!1&&(i=""),"undefined"==typeof n&&n===!1&&(n=""),"undefined"==typeof r&&r===!1&&(r=""),o=t.options.templates[d],d){case"password":case"text":a.wrap(o);break;case"file":c=e(o.replace("{{name}}",i)),c.bind("click",{$node:a},function(e){var a=e.data.$node;a.trigger("click")}),a.bind("change",{$html:c},function(a){var t=e(this).val().split("\\").pop(),d=a.data.$html;d.addClass("filled").find(".cform-filename").text(t)}),t.addToDom(a,c);break;case"checkbox":c=e(o.replace("{{name}}",i).replace("{{value}}",n)),(r||"checked"===r)&&c.addClass("checked").data("checked",!0),c.bind("click",{$origin:a},function(a){var t=e(this),d=a.data.$origin,i=t.data("checked");i?(d.prop("checked",!1),t.removeClass("checked").data("checked",!1)):(d.prop("checked",!0),t.addClass("checked").data("checked",!0))}),a.bind("change",{$mirror:c},function(a){var t=e(this),d=a.data.$mirror;t.prop("checked")?d.addClass("checked").data("checked",!0):d.removeClass("checked").data("checked",!1)}),t.addToDom(a,c);break;case"radio":if(t.radioGroupArray.indexOf(i)>-1)break;t.radioGroupArray.push(i);var l=e();$nodes=t.$element.find('input[type="radio"][name="'+i+'"]'),$nodes.each(function(){var a=e(this),t=a.val(),d=a.attr("checked"),n=e();n=e(o.replace("{{name}}",i).replace("{{value}}",t)),d&&n.addClass("checked").data("checked","true"),l=l.add(n),a.addClass("cform-hidden").after(n)}),l.bind("click",{$mirrors:l,$origins:$nodes},function(a){var t=e(this),d=a.data.$mirrors,i=a.data.$origins,n=t.data("value");return t.data("checked")?!0:(d.removeClass("checked").data("checked",!1),t.addClass("checked").data("checked",!0),void i.prop("checked",!0).filter('[value="'+n+'"]').prop("checked",!0))}),$nodes.bind("change",{$mirrors:l,$origins:$nodes},function(a){var t=e(this),d=a.data.$mirrors,i=(a.data.$origins,t.val());return t.data("checked")?!0:void d.removeClass("checked").data("checked",!1).filter('[data-value="'+i+'"]').data("checked",!0).addClass("checked")}),t.addToDom(a,c);break;case"submit":a.wrap(o);break;default:console.log("Error: No matching was found - You will be forever alone!")}},t.handleSelect=function(a){var d=a.attr("name"),i=a.attr("value"),n=a.attr("multiple"),r=a.find("option"),o=r.filter(":selected"),c="",l=e(),s=e();"undefined"==typeof d&&d===!1&&(d=""),"undefined"==typeof i&&i===!1&&(i=""),"undefined"==typeof n||n===!1?(n=!1,c=t.options.templates.select,s=e(c.replace("{{name}}",d).replace("{{text}}",o.html()))):(n=!0,c=t.options.templates.multiselect,s=e(c.replace("{{name}}",d))),r.each(function(){var a=e(this),d=a.prop("selected")?"selected":"",i=t.options.templates.option;i=i.replace("{{value}}",a.val()).replace("{{text}}",a.html()),l=l.add(e(i).addClass(d))}),s.find(".cform-control").bind("click",{$mirror:s},function(a){$mirror=a.data.$mirror,$mirror.addClass("active"),e(document).bind("click.cForm",{$mirror:$mirror},function(a){$mirror=a.data.$mirror,e(a.target).closest(".cform-select").length||($mirror.removeClass("active"),e(document).unbind("click.cForm"))})}),l.bind("click",{$origin:a,$mirror:s,$options:l,multiple:n},function(a){var t=e(this),d=a.data.$origin,i=a.data.$mirror,n=a.data.$options,r=a.data.multiple,o=t.data("value"),c=t.html();if(r){var l=[];t.hasClass("selected")?(l=d.val(),l.splice(l.indexOf(o),1),d.val(l),i.data("value",l),t.removeClass("selected")):(l=d.val()?d.val():[],l.push(o),d.val(l),i.data("value",l),t.addClass("selected"))}else n.not(t).removeClass("selected"),t.addClass("selected"),d.val(o),i.data("value",o).removeClass("active").find(".cform-control .text").html(c)}),a.bind("change",{$origin:a,$mirror:s,$options:l,multiple:n},function(a){var t=e(this),d=t.val(),i=t.find('option[value="'+d+'"]').html(),n=a.data.$origin,r=a.data.$mirror,o=a.data.$options,c=a.data.multiple;if(c){var l=n.val()?n.val():[],s=0;for(r.data("value",l),o.removeClass("selected"),s=0;s<l.length;s++)o.filter('[data-value="'+l[s]+'"]').addClass("selected")}else r.data("value",d).find(".cform-control").html(i),o.removeClass("selected").filter('[data-value="'+d+'"]').addClass("selected")}),s.find("ul").append(l),t.addToDom(a,s)},t.addToDom=function(e,a){e.addClass("cform-hidden").after(a)},t.tagName=function(e){return e.prop("tagName").toLowerCase()},t.init()},e.cForm.defaultOptions={templates:{text:'<div class="cform-text"></div>',textarea:'<div class="cform-text"></div>',password:'<div class="cform-text cform-password"></div>',file:'<div class="cform-file" data-name="{{name}}">    							<div class="cform-control">choose file</div>    							<div class="cform-filename"> click here</div>    						</div>',checkbox:'<div class="cform-checkbox" data-name="{{name}}" data-value="{{value}}">    							<div class="cform-marker"></div>    						</div>',radio:'<div class="cform-radio" data-name="{{name}}" data-value="{{value}}">    							<div class="cform-marker"></div>    						</div>',select:'<div class="cform-select" data-name="{{name}}">    							<div class="cform-control"><span class="text">{{text}}</span><span class="chevron bottom"></span></div>    							<ul></ul>    						</div>',multiselect:'<div class="cform-multiselect" data-name="{{name}}">    							<ul></ul>    						</div>',option:'<li data-value="{{value}}">{{text}}</li>',button:'<div class="cform-button"></div>',submit:'<div class="cform-submit"></div>'}},e.fn.cForm=function(a){return this.each(function(){new e.cForm(this,a)})}}(jQuery);